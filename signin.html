<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Sign In</title>
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    
    <link rel="stylesheet" href="signinStyle.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f8f9fa;
        }

        .container {
            max-width: 400px;
            margin-top: 50px;
        }

        .signin-form {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        #error-message, #forgot-password-popup {
            display: none;
        }

        .spinner-options {
            margin-top: 20px;
        }

        .spinner-options p {
            margin-bottom: 15px;
        }

        .btn-info, .btn-forgot-password {
            background-color: #17a2b8;
            border-color: #17a2b8;
        }

        .btn-info:hover, .btn-forgot-password:hover {
            background-color: #117a8b;
            border-color: #117a8b;
        }
    </style>
</head>
<body>

<div class="container">
    <form class="signin-form" action="#" method="post" onsubmit="return validateForm()">
        <h2 class="text-center mb-4">Sign In</h2>
        <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" class="form-control" id="username" name="username" required>
        </div>
        <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" class="form-control" id="password" name="password" required>
        </div>
        <div class="form-group">
            <button type="button" class="btn btn-forgot-password btn-block" onclick="showForgotPasswordPopup()">Forgot My Password</button>
        </div>
    </form>

    <div id="error-message" class="alert alert-danger" style="display: none;"></div>

    <div class="spinner-options mt-3">
        <p class="text-center">Choose Sign In As:</p>
        <div class="text-center">
            <button class="btn btn-info mr-2" onclick="showSpinner('student')">Student Login</button>
            <button class="btn btn-info" onclick="showSpinner('teacher')">Teacher Login</button>
        </div>
        <div id="spinner" class="text-center" style="display: none;">
            <div class="spinner-border text-info" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
    </div>
</div>

<!-- Forgot Password Popup -->
<div id="forgot-password-popup" class="modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Forgot My Password</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closeForgotPasswordPopup()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Enter your email address to reset your password:</p>
                <input type="email" class="form-control" id="forgot-email" required>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="closeForgotPasswordPopup()">Close</button>
                <button type="button" class="btn btn-primary" onclick="resetPassword()">Reset Password</button>
            </div>
        </div>
    </div>
</div>

<script>
    function validateForm() {
        var username = document.getElementById('username').value;
        var password = document.getElementById('password').value;
        var errorMessage = document.getElementById('error-message');

        if (username === '' || password === '') {
            errorMessage.innerHTML = 'Please enter both username and password.';
            errorMessage.style.display = 'block';
            return false;
        }

        // Check if username contains "@quinnipiac.edu"
        if (!username.includes('@quinnipiac.edu')) {
            errorMessage.innerHTML = 'Please use a valid Quinnipiac University email address.';
            errorMessage.style.display = 'block';
            return false;
        }

        if (username === '' || password === '') {
            errorMessage.innerHTML = 'Please enter both username and password.';
            errorMessage.style.display = 'block';
            return false;
        }


        return true;
    }

    function showSpinner(type) {
        var spinnerDiv = document.getElementById('spinner');

        if (type === 'student' && validateForm()) {
            // Simulate loading with a delay (2 seconds)
            spinnerDiv.style.display = 'block';
            setTimeout(function () {
                // Redirect to MakeUpLab.html for student login
                window.location.href = 'MakeUpLab.html';
            }, 2000);
        } else if (type === 'teacher' && validateForm()) {
            // Simulate loading with a delay (2 seconds)
            spinnerDiv.style.display = 'block';
            setTimeout(function () {
                // Redirect to start.html for teacher login
                window.location.href = 'start.html';
            }, 2000);
        }
    }

    function showForgotPasswordPopup() {
        var forgotPasswordPopup = document.getElementById('forgot-password-popup');
        forgotPasswordPopup.style.display = 'block';
    }

    function closeForgotPasswordPopup() {
        var forgotPasswordPopup = document.getElementById('forgot-password-popup');
        forgotPasswordPopup.style.display = 'none';
    }

    function resetPassword() {
        // Placeholder for resetting password (conceptual, not functional)
        alert('Password reset email sent to: ' + document.getElementById('forgot-email').value);
        closeForgotPasswordPopup();
    }
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>
</html>
